{"version":3,"file":"form_loader.min.js","sources":["form_loader.js"],"names":["Bitrix24FormLoader","init","this","yaId","forms","eventHandlers","frameHeight","defaultNodeId","window","Bitrix24FormObject","forEach","preLoad","params","_this","type","defaultNode","document","getElementById","defaultClickClassNodeList","getElementsByClassName","id","click","length","i","push","item","nextElementSibling","Object","prototype","toString","call","formInstance","isFormExisted","getUniqueLoadId","buttonNode","addEventListener","showPopup","setTimeout","delay","load","createPopup","popup","createElement","innerHTML","children","node","querySelector","btn","hidePopup","body","insertBefore","appendChild","styleFixNode","setAttribute","createTextNode","head","resizePopup","addEventHandler","form","keyCode","e","kc","which","interfaceMagic","heightValues","scrollHeight","documentElement","offsetHeight","clientHeight","filter","heightValue","windowHeight","Math","min","apply","popupHeight","needScroll","style","height","width","scrollWidth","offsetWidth","clientWidth","util","isIOS","addClass","display","removeClass","scrollToPopupMiddle","uniqueLoadId","h","scrollTop","iframe","pos","BX","top","screenHeight","scrollOffset","pageYOffset","scrollTo","element","className","indexOf","replace","hasClass","classList","nodeListToArray","filtered","name","test","navigator","userAgent","isMobile","createFrame","formUrl","page","domain","frame","frameName","locationHash","location","protocol","host","from","href","fields","options","presets","frameSrc","lang","sec","Date","encodeURIComponent","JSON","stringify","handlers","execEventHandler","ref","match","parentNode","onFrameLoad","event","origin","doFrameAction","data","unload","removeChild","dataString","parse","err","action","value","setFrameHeight","parseInt","eventName","dataLayer","virtualPageURL","eventCategory","eventAction","ga","isGaExists","getAll","tracker","get","gaId","Ya","Metrika","counters","reachGoal","checkHash","hash","substring","ie","postMessage","frameParameters","SiteGuest","pages","getPages","visitedPages","send","gid","contentWindow","el","handler","attachEvent","target","eventHandler"],"mappings":"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"}