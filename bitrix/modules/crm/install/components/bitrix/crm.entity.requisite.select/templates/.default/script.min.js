BX.namespace("BX.Crm");if(typeof BX.Crm.EntityRequisiteSelector==="undefined"){BX.Crm.EntityRequisiteSelector=function(){this._id="";this._settings={};this._editorSaveHandler=BX.delegate(this.onEditorSave,this);this._editorCancelHandler=BX.delegate(this.onEditorCancel,this);this._sliderCloseHandler=BX.delegate(this.onSliderClose,this)};BX.Crm.EntityRequisiteSelector.prototype={initialize:function(t,e){this._id=BX.type.isNotEmptyString(t)?t:BX.util.getRandomString(4);this._settings=e?e:{};this.bindEvents();if(typeof top.BX.Bitrix24.Slider!=="undefined"){var i=top.BX.Bitrix24.Slider.getCurrentPage();if(i){BX.addCustomEvent(i.getWindow(),"BX.Bitrix24.PageSlider:onClose",this._sliderCloseHandler)}}},bindEvents:function(){BX.addCustomEvent(window,"BX.Crm.EntityEditor:onSave",this._editorSaveHandler);BX.addCustomEvent(window,"BX.Crm.EntityEditor:onCancel",this._editorCancelHandler)},unbindEvents:function(){BX.removeCustomEvent(window,"BX.Crm.EntityEditor:onSave",this._editorSaveHandler);BX.removeCustomEvent(window,"BX.Crm.EntityEditor:onCancel",this._editorCancelHandler)},onEditorSave:function(t,e){if(this._id!==BX.prop.getString(e,"id")){return}BX.localStorage.set("BX.Crm.EntityRequisiteSelector:onSave",{context:e["externalContext"],entityTypeId:e["entityTypeId"],entityId:e["entityId"],requisiteId:e["model"].getField("REQUISITE_ID",0),bankDetailId:e["model"].getField("BANK_DETAIL_ID",0)},10);e["cancel"]=true;this.unbindEvents();this.closeSlider()},onEditorCancel:function(t,e){if(this._id!==BX.prop.getString(e,"id")){return}BX.localStorage.set("BX.Crm.EntityRequisiteSelector:onCancel",{context:e["externalContext"],entityTypeId:e["entityTypeId"],entityId:e["entityId"],requisiteId:e["model"].getField("REQUISITE_ID",0),bankDetailId:e["model"].getField("BANK_DETAIL_ID",0)},10);e["cancel"]=true;this.unbindEvents();this.closeSlider()},closeSlider:function(){if(typeof top.BX.Bitrix24.Slider!=="undefined"){setTimeout(function(){top.BX.Bitrix24.Slider.close(false)},250)}},onSliderClose:function(t){setTimeout(function(){top.BX.Bitrix24.Slider.destroy(t.getUrl())},1e3)}};BX.Crm.EntityRequisiteSelector.create=function(t,e){var i=new BX.Crm.EntityRequisiteSelector;i.initialize(t,e);return i}}
//# sourceMappingURL=script.map.js